<ons-page>
	
<ons-toolbar>
	<div class="left">
		<ons-back-button>返回</ons-back-button>
	</div>
	<div class="center">特价单明细</div>
</ons-toolbar>


<style>
	.page__content{
		bottom: 44px !important;
		padding-bottom: 1em !important;
		overflow-y: auto !important;
	}
	.divProf {
		width: 100%;
		line-height: 2em;
	}
	#divGP{
		display: none;
	}
</style>
<ons-list>
	<ons-list-item modifier="longdivider">
		<ons-icon icon="fa-list-alt" style="color:#ee1a26;" class="mr-10"></ons-icon>
		<span class="font-16">单号：<span id="sp_orderNo"></span></span>
	</ons-list-item>
	<ons-list-item class="pr-10 font-16" modifier="longdivider">
		<div class="divProf">
			<span class="fl-left text-gray">日期：</span> <span id="sp_date" class="fl-right"></span>
		</div>
		<div class="divProf">
			<span class="fl-left text-gray">一级代理商：</span> <span id="sp_angent1" class="fl-right"></span>
		</div>
		<div class="divProf">
			<span class="fl-left text-gray">二级代理商：</span> <span id="sp_angent2" class="fl-right"></span>
		</div>
		<div class="divProf">
			<span class="fl-left text-gray">客户名称：</span> <span id="sp_customer" class="fl-right"></span>
		</div>
		<div class="divProf">
			<span class="fl-left text-gray">项目总价：</span> <span id="sp_price" class="fl-right"></span>
		</div>
		<div id="divGP" class="divProf">
			<span class="fl-left text-gray">整单GP：</span> <span class="fl-right">-9.60</span>
		</div>
	</ons-list-item>
</ons-list>

<p class="font-16">
	<b class="prefix"></b>产品明细
</p>

<div class="tb-wrapper">
	<table id="tbProductList" class="tb">
		<thead>
			<tr>
				<th>产品名称</th>
				<th>面价</th>
				<th>折扣</th>
				<th>折扣金额</th>
				<th>数量</th>
				<th>总金额</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>1300001383</td>
				<td>2,728.00</td>
				<td class="TdEditable">57.70</td>
				<td>1,574.14</td>
				<td class="TdEditable">50.00</td>
				<td>78,707.00</td>
			</tr>
			<tr>
				<td>1890003707</td>
				<td>158,589.00</td>
				<td class="TdEditable">57.70</td>
				<td>91,510.92</td>
				<td class="TdEditable">50.00</td>
				<td>4,575,546.00</td>
			</tr>
			<tr>
				<td>1300001959</td>
				<td>97.00</td>
				<td class="TdEditable">57.70</td>
				<td>55.97</td>
				<td class="TdEditable">100.00</td>
				<td>5,597.00</td>
			</tr>
		</tbody>
	</table>
</div>


<p class="font-16">
	<b class="prefix"></b>处理过程
</p>

<div class="tb-wrapper">
	<table class="tb">
		<thead>
			<tr>
				<th>操作人</th>
				<th>操作时间</th>
				<th>操作说明</th>
				<th>审批</th>
				<th>折扣金额</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>陆萍</td>
				<td>2019/09/12</td>
				<td>修改特价单</td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td>倪宏锋</td>
				<td>2019/09/13</td>
				<td>审批/提供意见</td>
				<td></td>
				<td></td>
			</tr>
			<tr id="trNk">
				<td>唐琪琳</td>
				<td>2019/09/13</td>
				<td>审批/提供意见</td>
				<td></td>
				<td></td>
			</tr>
		</tbody>
	</table>
</div>

<div id="divConWraper">

</div>









<style>
	.btmButton {
		flex-grow: 1;
		text-align: center;
		border-radius: 0;
		font-size: 20px;
	}
</style>
<ons-bottom-toolbar>
	<div style="height: 100%;  display: flex;">
		<ons-button class="btmButton">审批</ons-button>
		<ons-button class="btmButton" modifier=" outline">拒绝</ons-button>
	</div>
</ons-bottom-toolbar>


    <script>ons.getScriptPage().onInit = function () {
    var id = router.topPage.data.id;
    console.log(id, this);
    if (id == '111') {
        var orderNo = 'SP201909120001';
        var date = '2019/09/12';
        var angent1 = '张家港保税区欧菱机电贸易有限公司';
        var angent2 = '苏州菱麦自动化设备科技有限公司';
        var customer = '博众精工科技股份有限公司';
        var price = '&yen; 4,659,850.00';
        $('#sp_orderNo').text(orderNo);
        $('#sp_date').text(date);
        $('#sp_angent1').text(angent1);
        $('#sp_angent2').text(angent2);
        $('#sp_customer').text(customer);
        $('#sp_price').html(price);
    }
    else {
        var orderNo = 'SP201909120002';
        var date = '2019/09/12';
        var angent1 = '张家港保税区欧菱机电贸易有限公司';
        var angent2 = '苏州菱麦自动化设备科技有限公司';
        var customer = '博众精工科技股份有限公司';
        var price = '&yen; 4,659,850.00';
        $('#sp_orderNo').text(orderNo);
        $('#sp_date').text(date);
        $('#sp_angent1').text(angent1);
        $('#sp_angent2').text(angent2);
        $('#sp_customer').text(customer);
        $('#sp_price').html(price);
    }
    var userList = 'MASPWGU/MASPCCY/MASPAT/MASPLJI/RISPZW/MASPWJ'.split('/');
    if (userList.indexOf(currentUser.loginName) > -1) {
        $('#divGP').show();
    }
    var userNk = 'VBSOL02/VBSOL01'.split('/');
    if (userNk.indexOf(currentUser.loginName) > -1) {
        $('#trNk').remove();
    }
    else {
        if (id != '111') {
            $('#trNk').html("\n            <td>\u5510\u742A\u7433</td>\n            <td>2019/09/13</td>\n            <td>\u62D2\u7EDD/\u63D0\u4F9B\u610F\u89C1</td>\n            <td>\u91CD\u590D\u7684\u5355\u636E</td>\n            <td></td>\n            ");
        }
    }
    var userWp = 'BABPZNJ/MASPLKY/BABPZHQ'.split('/');
    if (userWp.indexOf(currentUser.loginName) > -1) {
        $('#divConWraper').html("\n            <p class=\"font-16\">\n                <b class=\"prefix\"></b>\u4EA7\u54C1\u7EBF\u91D1\u989D\n            </p>\n            <div class=\"tb-wrapper\">\n                <table class=\"tb\">\n                    <thead>\n                    <tr>\n                        <th>\u4EA7\u54C1\u7EBF</th>\n                        <th>\u6298\u6263</th>\n                        <th>\u603B\u91D1\u989D</th>\n                    </tr>\n                </thead>\n                <tbody>\n                <tr>\n                    <td>11</td>\n                    <td>29.00</td>\n                    <td>57,403.76</td>\n                </tr>\n                </tbody>\n            </table>\n            </div>\n        ");
    }
    var userWss = 'MASPWGU/MASPCCY/MASPAT/MASPLJI/RISPZW/MASPWJ'.split('/');
    if (userWss.indexOf(currentUser.loginName) > -1) {
        $('#divConWraper').html("\n            <p class=\"font-16\">\n                <b class=\"prefix\"></b>\u4EA7\u54C1\u7EBF\u91D1\u989D\n            </p>\n            <div class=\"tb-wrapper\">\n                <table class=\"tb\">\n                    <thead>\n                    <tr>\n                        <th>\u4EA7\u54C1\u7EBF</th>\n                        <th>\u6298\u6263</th>\n                        <th>\u603B\u91D1\u989D</th>\n                        <th>GP(%)</th>\n                    </tr>\n                </thead>\n                <tbody>\n                <tr>\n                    <td>11</td>\n                    <td>29.00</td>\n                    <td>57,403.76</td>\n                    <td>-9.62</td>\n                </tr>\n                </tbody>\n            </table>\n            </div>\n        ");
    }
    $('#tbProductList').on('click', '.TdEditable', function () {
        var td = $(this);
        var oldValue = td.text();
        ons.notification
            .prompt({
            title: '修改',
            message: '请输入数字',
            placeholder: '数字',
            defaultValue: oldValue,
            buttonLabels: ['取消', '确定'],
            inputType: 'text'
        })
            .then(function (input) {
            if (input && input.toString() != oldValue) {
                ons.notification.alert('修改完成', { title: '' });
                td.html(input);
            }
        });
    });
};
</script><!--ignore-->
</ons-page>
