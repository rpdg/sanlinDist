<ons-page>
	
<ons-toolbar>
	<div class="left">
		<ons-back-button>返回</ons-back-button>
	</div>
	<div class="center">条件查询</div>
</ons-toolbar>

<ons-list style="margin: 10px 0 ;">
	<ons-list-item modifier="longdivider chevron" tappable>
		<div class="left"><span class="font-16">代理商</span></div>
		<div class="right"><span id="" class="font-16 text-gray">请选择代理商</span></div>
	</ons-list-item>
	<ons-list-item modifier="longdivider chevron" tappable>
		<div class="left"><span class="font-16">客户</span></div>
		<div class="right"><span id="" class="font-16 text-gray">请选择客户</span></div>
	</ons-list-item>
	<ons-list-item modifier="longdivider chevron" tappable>
		<div class="left"><span class="font-16">类型</span></div>
		<div class="right"><span id="" class="font-16 text-gray">请选择类型</span></div>
	</ons-list-item>
	<ons-list-item modifier="longdivider chevron" tappable>
		<div class="left"><span class="font-16">状态</span></div>
		<div class="right"><span id="" class="font-16 text-gray">请选择状态</span></div>
	</ons-list-item>
	<ons-list-item id="pickStartDate" modifier="longdivider chevron" tappable>
		<div class="left"><span class="font-16">开始时间</span></div>
		<div class="right font-16"><span class="text-gray">请选择开始时间</span></div>
	</ons-list-item>
	<ons-list-item modifier="longdivider chevron" tappable>
		<div class="left"><span class="font-16">结束时间</span></div>
		<div class="right"><span id="pickEndDate" class="font-16 text-gray">请选择结束时间</span></div>
	</ons-list-item>
</ons-list>

<style>
	#btnSearch {
		width: 88vw;
		margin: 0 auto;
	}
</style>
<ons-button id="btnSearch" modifier="large" ripple>查 询</ons-button>


    <script>ons.getScriptPage().onInit = function () {
    let fired = false;
    $(this).on('show', function () {
        if (!fired) {
            fired = true;
            $('#check-all').syncCheckBoxGroup(':checkbox', '#Tab1');
            var nameEl = document.getElementById('pickStartDate');
            function range(n, m, surfix = '') {
                let arr = [];
                for (let i = n; i <= m; i++) {
                    let value = (i < 10 ? '0' + i : i) + surfix;
                    arr.push({
                        text: value,
                        value: i
                    });
                }
                return arr;
            }
            function getDaysOfMonth(year, month) {
                let days = 30;
                if ([1, 3, 5, 7, 8, 10, 12].indexOf(month) > -1) {
                    days = 31;
                }
                else {
                    if (month === 2) {
                        days = !(year % 400) || (!(year % 4) && year % 100) ? 29 : 28;
                    }
                }
                return days;
            }
            const toDate = new Date();
            const toYear = toDate.getFullYear();
            const toMonth = toDate.getMonth() + 1;
            const toDay = toDate.getDate();
            var years = range(toYear - 3, toYear + 3);
            var months = range(1, 12);
            var days = range(1, getDaysOfMonth(toYear, toMonth));
            var picker = new Picker({
                data: [years, months, days],
                selectedIndex: [3, toMonth - 1, toDay - 1],
                title: '日期'
            });
            picker.on('picker.select', function (selectedVal, selectedIndex) {
                $('.right', nameEl).text(years[selectedIndex[0]].text + '/' + months[selectedIndex[1]].text + '/' + days[selectedIndex[2]].text);
            });
            picker.on('picker.change', function (index, selectedIndex) {
                console.log(index, selectedIndex, picker.selectedIndex);
                console.log(years[picker.selectedIndex[0]].value, months[picker.selectedIndex[1]].value);
                if (index < 2) {
                    days = range(1, getDaysOfMonth(years[picker.selectedIndex[0]].value, months[picker.selectedIndex[1]].value));
                    picker.refillColumn(2, days);
                    picker.scrollColumn(2, 0);
                }
            });
            nameEl.addEventListener('click', function () {
                picker.show();
            });
        }
    });
};
</script><!--ignore-->
</ons-page>
